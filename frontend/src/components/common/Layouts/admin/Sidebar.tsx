import Image from "next/image";
import Link from "next/link";
import style from "../../css/sidebar.module.scss";
import sidebarlog from "../../../../../public/assets/img/logo.png";
import { useRouter } from "next/router";
import { useLogout } from "../../../../../src/hooks/auth/useLogout";
export default function Sidebar() {
  const router = useRouter();
  const { logout } = useLogout();

  const handleLogout = () => {
    logout();
    router.push("/admin/login");
  };

  return (
    <>
      <main className="main_wrapper">
        <div className={`sidebar_main ${style.sidebar_main}`}>
          <div
            className={`offcanvas offcanvas-start ${style.offcanvas}`}
            tab-index="-1"
            id="offcanvasExample"
            aria-labelledby="offcanvasExampleLabel"
          >
            <div className={`offcanvas-header ${style.offcanvas_header}`}>
              <div className={`header_logo ${style.header_logo}`}>
                <Image
                  src={sidebarlog}
                  alt="Logo icon"
                  width={57}
                  height={67}
                  priority
                />
              </div>
            </div>

            <div className={`offcanvas-body ${style.offcanvas_body}`}>
              <div className={`inner_sidebar ${style.inner_sidebar}`}>
                <div className={`menu_list ${style.menu_list}`} id="sidebar">
                  <ul className="menu_list_main">
                    <li className="nav-item" title="Dashboard">
                      <Link
                        className={`menu_list_block ${style.menu_list_block}  ${
                          router.pathname == "/admin/dashboard"
                            ? style.active
                            : ""
                        }`}
                        href="/admin/dashboard"
                      >
                        <div className={`sidebar_icon ${style.sidebar_icon}`}>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="29"
                            height="30"
                            viewBox="0 0 29 30"
                            fill="none"
                          >
                            <path
                              fillRule="evenodd"
                              clipRule="evenodd"
                              d="M22.0109 3.99448C22.0109 2.06599 23.5769 0.5 25.5054 0.5C27.4338 0.5 28.9998 2.06599 28.9998 3.99448C28.9998 5.92297 27.4338 7.48896 25.5054 7.48896C23.5769 7.48896 22.0109 5.92297 22.0109 3.99448ZM16.4285 19.0008L20.619 13.5938L20.561 13.6228C20.793 13.3038 20.8365 12.8978 20.677 12.5353C20.5189 12.1728 20.1695 11.9263 19.7939 11.8973C19.401 11.8538 19.0109 12.0278 18.7775 12.3468L15.2699 16.8853L11.252 13.7243C11.0055 13.5358 10.7155 13.4619 10.4255 13.4923C10.137 13.5358 9.87596 13.6939 9.70051 13.9259L5.40998 19.5098L5.32153 19.6403C5.07503 20.1028 5.19103 20.6973 5.62603 21.0178C5.82903 21.1483 6.04653 21.2353 6.29303 21.2353C6.62798 21.2498 6.94552 21.0743 7.14852 20.8003L10.788 16.1153L14.9205 19.2198L15.051 19.3053C15.515 19.5518 16.095 19.4373 16.4285 19.0008ZM19.5024 3.08151C19.4444 3.444 19.4154 3.8065 19.4154 4.169C19.4154 7.43148 22.0544 10.069 25.3024 10.069C25.6649 10.069 26.0129 10.027 26.3754 9.96897V21.669C26.3754 26.5859 23.4754 29.5004 18.5454 29.5004H7.83141C2.89999 29.5004 0 26.5859 0 21.669V10.9405C0 6.01049 2.89999 3.08151 7.83141 3.08151H19.5024Z"
                            />
                          </svg>
                        </div>
                      </Link>
                    </li>

                    <li className="nav-item" title="poll">
                      <Link
                        className={`menu_list_block ${style.menu_list_block}  ${
                          router.pathname == "/admin/poll" ? style.active : ""
                        }`}
                        href="/admin/poll"
                      >
                        <div className={`sidebar_icon ${style.sidebar_icon}`}>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="30"
                            viewBox="0 0 20 30"
                            fill="none"
                          >
                            <path d="M14.9039 2.68892H12.4845C12.4845 1.72116 11.9038 0.656614 11.0329 0.269508C9.00054 -0.601481 7.06501 0.753391 7.06501 2.68892H4.54882C3.96816 2.68892 3.58105 3.17281 3.58105 3.65669V7.14065C3.58105 7.72131 4.06494 8.10841 4.54882 8.10841H14.9039C15.4846 8.10841 15.8717 7.62453 15.8717 7.14065V3.65669C15.8717 3.17281 15.4846 2.68892 14.9039 2.68892Z" />
                            <path d="M18.7747 4.62451H17.4198V8.59235C17.4198 9.17301 16.9359 9.56012 16.452 9.56012H3.09685C2.51619 9.56012 2.12909 9.07623 2.12909 8.59235V4.62451H0.774212C0.387106 4.62451 0 4.91484 0 5.39872V29.2058C0 29.5929 0.29033 29.98 0.774212 29.98H18.7747C19.1618 29.98 19.5489 29.6896 19.5489 29.2058V5.39872C19.5489 5.01162 19.1618 4.62451 18.7747 4.62451ZM6.67759 15.0764H9.00022V12.7537C9.00022 12.3666 9.29055 11.9795 9.77444 11.9795C10.2583 11.9795 10.5486 12.2699 10.5486 12.7537V15.0764H12.8713C13.2584 15.0764 13.6455 15.3667 13.6455 15.8506C13.6455 16.2377 13.3552 16.6248 12.8713 16.6248H10.5486V18.8507C10.5486 19.2378 10.2583 19.6249 9.77444 19.6249C9.29055 19.6249 9.00022 19.3346 9.00022 18.8507V16.528H6.67759C6.29048 16.528 5.90337 16.2377 5.90337 15.7538C5.90337 15.3667 6.29048 15.0764 6.67759 15.0764ZM15.0004 26.5928H4.5485C4.16139 26.5928 3.77429 26.3025 3.77429 25.8186C3.77429 25.4315 4.06462 25.0444 4.5485 25.0444H14.9036C15.2907 25.0444 15.6778 25.3347 15.6778 25.8186C15.6778 26.2057 15.3875 26.5928 15.0004 26.5928ZM15.0004 23.0121H4.5485C4.16139 23.0121 3.77429 22.7217 3.77429 22.2379C3.77429 21.8507 4.06462 21.4636 4.5485 21.4636H14.9036C15.2907 21.4636 15.6778 21.754 15.6778 22.2379C15.6778 22.7217 15.3875 23.0121 15.0004 23.0121Z" />
                          </svg>
                        </div>
                      </Link>
                    </li>

                    <li className="nav-item" title="My profile">
                      <Link
                        className={`menu_list_block ${style.menu_list_block} ${
                          router.pathname == "/admin/profile"
                            ? style.active
                            : ""
                        }`}
                        href="/admin/profile"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="28"
                          height="29"
                          viewBox="0 0 28 29"
                          fill="none"
                        >
                          <g opacity="0.5">
                            <path
                              fillRule="evenodd"
                              clipRule="evenodd"
                              d="M25.9584 16.791C26.477 17.0665 26.8771 17.5015 27.1587 17.9365C27.707 18.8355 27.6625 19.9375 27.129 20.909L26.0918 22.649C25.5435 23.577 24.521 24.157 23.4689 24.157C22.9503 24.157 22.3724 24.012 21.8982 23.722C21.5129 23.4755 21.0683 23.3885 20.5941 23.3885C19.1271 23.3885 17.8972 24.592 17.8527 26.0275C17.8527 27.695 16.4895 29 14.7853 29H12.77C11.0511 29 9.68782 27.695 9.68782 26.0275C9.65818 24.592 8.42825 23.3885 6.96123 23.3885C6.47223 23.3885 6.02768 23.4755 5.65722 23.722C5.18303 24.012 4.59029 24.157 4.08647 24.157C3.01955 24.157 1.99708 23.577 1.4488 22.649L0.426329 20.909C-0.121951 19.9665 -0.151588 18.8355 0.396692 17.9365C0.633786 17.5015 1.07834 17.0665 1.58216 16.791C1.99708 16.588 2.26381 16.2545 2.51572 15.863C3.25664 14.616 2.81209 12.9775 1.55253 12.238C0.085506 11.4115 -0.388682 9.57 0.455965 8.1345L1.4488 6.4235C2.30826 4.988 4.14574 4.4805 5.62758 5.3215C6.91678 6.0175 8.59126 5.5535 9.34699 4.321C9.58409 3.915 9.71745 3.48 9.68782 3.045C9.65818 2.4795 9.82118 1.943 10.1027 1.508C10.651 0.609 11.6438 0.029 12.7256 0H14.815C15.9115 0 16.9044 0.609 17.4526 1.508C17.7194 1.943 17.8972 2.4795 17.8527 3.045C17.8231 3.48 17.9565 3.915 18.1936 4.321C18.9493 5.5535 20.6238 6.0175 21.9278 5.3215C23.3948 4.4805 25.2471 4.988 26.0918 6.4235L27.0846 8.1345C27.9441 9.57 27.4699 11.4115 25.988 12.238C24.7285 12.9775 24.2839 14.616 25.0397 15.863C25.2768 16.2545 25.5435 16.588 25.9584 16.791ZM9.58203 14.5145C9.58203 16.791 11.464 18.6035 13.7905 18.6035C16.1169 18.6035 17.9544 16.791 17.9544 14.5145C17.9544 12.238 16.1169 10.411 13.7905 10.411C11.464 10.411 9.58203 12.238 9.58203 14.5145Z"
                            />
                          </g>
                        </svg>
                      </Link>
                    </li>

                    <li className="nav-item" title="Logout">
                      <button
                        className={`menu_list_block ${style.menu_list_block}`}
                        onClick={() => {
                          logout().then((res: any) => {
                            router.push("/admin/login");
                          });
                        }}
                        style={{ border: 0 }}
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="31"
                          height="29"
                          viewBox="0 0 31 29"
                          fill="none"
                        >
                          <g opacity="0.5">
                            <path
                              fillRule="evenodd"
                              clipRule="evenodd"
                              d="M11.4483 13.3835C10.8139 13.3835 10.3123 13.8765 10.3123 14.5C10.3123 15.109 10.8139 15.6165 11.4483 15.6165H20.2969V13.3838H26.2999L23.9799 11.0783C23.5449 10.6433 23.5449 9.93279 23.9799 9.49779C24.4149 9.04829 25.1254 9.04829 25.5604 9.48329L29.7944 13.7028C30.0119 13.9203 30.1279 14.1958 30.1279 14.5003C30.1279 14.7903 30.0119 15.0803 29.7944 15.2833L25.5604 19.5028C25.3429 19.7203 25.0529 19.8363 24.7774 19.8363C24.4874 19.8363 24.1974 19.7203 23.9799 19.5028C23.5449 19.0678 23.5449 18.3573 23.9799 17.9223L26.2999 15.6168H20.3V22.5475C20.3 26.1 17.3642 29 13.735 29H6.55029C2.93583 29 0 26.1145 0 22.562V6.4525C0 2.8855 2.95058 0 6.56504 0H13.7645C17.3642 0 20.3 2.8855 20.3 6.438V13.3835H11.4483Z"
                            />
                          </g>
                        </svg>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </>
  );
}
